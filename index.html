<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Socrates Palacios</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="icon" href="http://example.com/favicon.png">
  <!-- jQuery library -->
  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
  
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
  <style> 
    sub { 
        vertical-align: sub; 
        font-size: small; 
    } 
    sup { 
        vertical-align: super; 
        font-size: small; 
    } 
  </style> 
  <script id="code" type="text/javascript">
    function init() {
      var $ = go.GraphObject.make;  // for more concise visual tree definitions

      myDiagram =
        $(go.Diagram, "myDiagramDiv",
          {
            "grid.visible": true,
            "grid.gridCellSize": new go.Size(30, 20),
            "draggingTool.isGridSnapEnabled": true,
            "resizingTool.isGridSnapEnabled": true,
            "rotatingTool.snapAngleMultiple": 90,
            "rotatingTool.snapAngleEpsilon": 45,
            "undoManager.isEnabled": true
          });

      // when the document is modified, add a "*" to the title and enable the "Save" button
      myDiagram.addDiagramListener("Modified", function(e) {
        var button = document.getElementById("SaveButton");
        if (button) button.disabled = !myDiagram.isModified;
        var idx = document.title.indexOf("*");
        if (myDiagram.isModified) {
          if (idx < 0) document.title += "*";
        } else {
          if (idx >= 0) document.title = document.title.substr(0, idx);
        }
      });

      myDiagram.nodeTemplateMap.add("Process",
        $(go.Node, "Auto",
          {
            locationSpot: new go.Spot(0.5, 0.5), locationObjectName: "SHAPE",
            resizable: true, resizeObjectName: "SHAPE"
          },
          new go.Binding("location", "pos", go.Point.parse).makeTwoWay(go.Point.stringify),
          $(go.Shape, "Cylinder1",
            {
              name: "SHAPE",
              strokeWidth: 2,
              fill: $(go.Brush, "Linear",
                {
                  start: go.Spot.Left, end: go.Spot.Right,
                  0: "gray", 0.5: "white", 1: "gray"
                }),
              minSize: new go.Size(50, 50),
              portId: "", fromSpot: go.Spot.AllSides, toSpot: go.Spot.AllSides
            },
            new go.Binding("desiredSize", "size", go.Size.parse).makeTwoWay(go.Size.stringify)),
          $(go.TextBlock,
            {
              alignment: go.Spot.Center, textAlign: "center", margin: 5,
              editable: true
            },
            new go.Binding("text").makeTwoWay())
        ));

      myDiagram.nodeTemplateMap.add("Valve",
        $(go.Node, "Vertical",
          {
            locationSpot: new go.Spot(0.5, 1, 0, -21), locationObjectName: "SHAPE",
            selectionObjectName: "SHAPE", rotatable: true
          },
          new go.Binding("angle").makeTwoWay(),
          new go.Binding("location", "pos", go.Point.parse).makeTwoWay(go.Point.stringify),
          $(go.TextBlock,
            { alignment: go.Spot.Center, textAlign: "center", margin: 5, editable: true },
            new go.Binding("text").makeTwoWay(),
            // keep the text upright, even when the whole node has been rotated upside down
            new go.Binding("angle", "angle", function(a) { return a === 180 ? 180 : 0; }).ofObject()),
          $(go.Shape,
            {
              name: "SHAPE",
              geometryString: "F1 M0 0 L40 20 40 0 0 20z M20 10 L20 30 M12 30 L28 30",
              strokeWidth: 2,
              fill: $(go.Brush, "Linear", { 0: "gray", 0.35: "white", 0.7: "gray" }),
              portId: "", fromSpot: new go.Spot(1, 0.35), toSpot: new go.Spot(0, 0.35)
            })
        ));

      myDiagram.linkTemplate =
        $(go.Link,
          { routing: go.Link.AvoidsNodes, curve: go.Link.JumpGap, corner: 10, reshapable: true, toShortLength: 7 },
          new go.Binding("points").makeTwoWay(),
          // mark each Shape to get the link geometry with isPanelMain: true
          $(go.Shape, { isPanelMain: true, stroke: "black", strokeWidth: 5 }),
          $(go.Shape, { isPanelMain: true, stroke: "gray", strokeWidth: 3 }),
          $(go.Shape, { isPanelMain: true, stroke: "white", strokeWidth: 1, name: "PIPE", strokeDashArray: [10, 10] }),
          $(go.Shape, { toArrow: "Triangle", fill: "black", stroke: null })
        );

      load();

      loop();  // animate some flow through the pipes
    }

    function loop() {
      var diagram = myDiagram;
      setTimeout(function() {
        var oldskips = diagram.skipsUndoManager;
        diagram.skipsUndoManager = true;
        diagram.links.each(function(link) {
          var shape = link.findObject("PIPE");
          var off = shape.strokeDashOffset - 2;
          shape.strokeDashOffset = (off <= 0) ? 20 : off;
        });
        diagram.skipsUndoManager = oldskips;
        loop();
      }, 100);
    }

    function save() {
      document.getElementById("mySavedModel").value = myDiagram.model.toJson();
      myDiagram.isModified = false;
    }
    function load() {
      myDiagram.model = go.Model.fromJson(document.getElementById("mySavedModel").value);
    }
  var d_text, no_text, n_text, f_text, temperatura, constituyente, densidad, k_text, cp, beta, alpha;
  var Microorganismos = {
    "data":[
      {
        "name":"A. hydrophila",
        "temperatura":51,
        "valorD":8.08,
        "valorZ":5.22
      },
      {
        "name":"B. cereus",
        "temperatura":100,
        "valorD":5.0,
        "valorZ":6.9
      },
      {
        "name":"B. coagulans",
        "temperatura":110,
        "valorD":2.7,
        "valorZ":6.1
      },
      {
        "name":"B. stearothermophilus",
        "temperatura":120,
        "valorD":4.0,
        "valorZ":5.0
      },
      {
        "name":"C. jejuni",
        "temperatura":50,
        "valorD":0.88,
        "valorZ":6.0
      },
      {
        "name":"Cl. perfringens",
        "temperatura":100,
        "valorD":0.3,
        "valorZ":3.8
      },
      {
        "name":"Cl. botulinum",
        "temperatura":121,
        "valorD":0.21,
        "valorZ":10
      },
      {
        "name":"Cl. thermosaccharlyticum",
        "temperatura":120,
        "valorD":3,
        "valorZ":7.2
      },
      {
        "name":"E. coli 0157:H7",
        "temperatura":62.8,
        "valorD":0.47,
        "valorZ":4.65
      },
      {
        "name":"L. monocytogenes",
        "temperatura":62,
        "valorD":2.9,
        "valorZ":5.98
      },
      {
        "name":"S. entenerides",
        "temperatura":32.8,
        "valorD":0.06,
        "valorZ":3.3
      },
      {
        "name":"St. Aureus (destrucción de la toxina)",
        "temperatura":98.9,
        "valorD":120,
        "valorZ":27.8
      },
      {
        "name":"Streptococcus Grupo D",
        "temperatura":70,
        "valorD":2.95,
        "valorZ":10
      },
      {
        "name":"Y. enterocolitica",
        "temperatura":60.0,
        "valorD":0.4,
        "valorZ":4.0
      },
      {
        "name":"Sac. cerevisiae",
        "temperatura":60,
        "valorD":22.5,
        "valorZ":5.5
      },
      {
        "name":"Y. enterocolitica",
        "temperatura":60,
        "valorD":0.4,
        "valorZ":3.9
      }

    ] 
  }
  $(document).ready(function(){
    var tablaMicroorganismos = $('#table_microorganismos').DataTable({
          select: true,
          data: Microorganismos["data"],
          columns: [
              { data: 'name' },
              { data: 'temperatura' },
              { data: 'valorD' },
              { data: 'valorZ' }
          ]
      });
      $('#table_microorganismos tbody').on('click', 'tr', function () {
        var data = tablaMicroorganismos.row( this ).data();
        $('#micro_text').val(data["name"]);
        $('#temp_text').val(data["temperatura"]);
        $('#d_text').val(data["valorD"]);
        $('#z_text').val(data["valorZ"]);
    } );

  });
	function myFunction(){
	  var deltah = new Number($("#deltah").val());
	  var up = new Number($("#up").val());
	  var left = new Number($("#left").val());
	  var center = new Number($("#center").val());
    var right = new Number($("#right").val());
    var bottom = new Number($("#bottom").val());
    var deltar = new Number($("#deltar").val());
    var alpha = new Number($("#alpha").val());
    var deltar = new Number($("#deltar").val());
	}
	
	function myCleaningFunction(){
        $("#deltah").val("");
        $("#up").val("");
        $("#left").val("");
        $("#center").val("");
        $("#right").val("");
        $("#bottom").val("");
        $("#deltar").val("");
        $("#alpha").val("");
        $("#deltat").val("");
	}
  function myFoFunction(){
    d_text = new Number($("#d_text").val());
	  no_text = new Number($("#no_text").val());
	  n_text = new Number($("#n_text").val());
    f_text = d_text*(Math.log(no_text)-Math.log(n_text));
    $("#f_text").val(f_text);
  }

  function myFoCleaningFunction(){
        $("#no_text").val("");
        $("#n_text").val("");
        $("#f_text").val("");
	}

  function myAlphaCleaningFunction(){
        $("#k_text").val("");
        $("#beta").val("");
        $("#cp").val("");
        $("#alpha").val("");
	}

  function myAlphaFunction(){
    k_text = new Number($("#k_text").val());
	  cp = new Number($("#cp").val());
	  beta = new Number($("#beta").val());
    alpha = (k_text)/(cp*beta);
    $("#alpha").val(alpha);
	}

  function myDensidadFunction(){
    temperatura = new Number($("#temperatura").val());
    constituyente = new String($("#constituyente").val());
    if (constituyente === "agua"){
      densidad = (997.18) + (3.1439*Math.pow(10,-3))*(temperatura)-(3.7574*Math.pow(10,-3))*(Math.pow(temperatura,2));
    } else if (constituyente === "proteina"){
      densidad = (1329.9) - (5.1840*Math.pow(10,-1))*(temperatura);
    } else if (constituyente === "grasa"){
      densidad = (925.59) - (4.1757*Math.pow(10,-1))*(temperatura);
    } else if (constituyente === "carbohidratos"){
      densidad = (1599.1) - (3.6589*Math.pow(10,-1))*(temperatura);
    } else if (constituyente === "fibra"){
      densidad = (1311.5) - (3.6589*Math.pow(10,-1))*(temperatura);
    } else {
      densidad = (2423.8) - (2.8063*Math.pow(10,-1))*(temperatura);
    }
    $("#densidad").val(densidad);
  }
  </script>

</head>
<body>
    <div class="container" align="center">
        <h1>Socrates Palacios Ponce</h1>
    </div>
    <hr>
    <div class="container" align="center">
        <div class="row">
            <input type="number"  disabled>
            <input type="number" disabled>
            <input type="number" disabled>
            <input type="number" disabled>
            <input id="deltah" type="number" placeholder="Δh" step=".01">
        </div>
        <div class="row">
            <input type="number" disabled>
            <input type="number" disabled>
            <input type="number" id="up" step=".01" placeholder="i,j-1">
            <input type="number" disabled>
            <input type="number" disabled>
        </div>
        <div class="row">
            <input type="number" disabled>
            <input type="number" id="left" step=".01" placeholder="i-1,j">
            <input type="number" id="center" step=".01" placeholder="i,j">
            <input type="number" id="right" step=".01" placeholder="i+1,j">
            <input type="number" disabled>
        </div>
        <div class="row">
            <input type="number" disabled>
            <input type="number" disabled>
            <input type="number" id="bottom" step=".01" placeholder="i,j+1">
            <input type="number" disabled>
            <input type="number" disabled>
        </div>
        <div class="row">
            <input id="deltar" type="number" placeholder="Δr" step=".01">
            <input type="number" disabled>
            <input type="number" disabled>
            <input type="number" disabled>
            <input type="number" disabled>
        </div>
    </div>
    <hr>
    <div class="container" align="center">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#home">Densidad</a></li>
            <li><a data-toggle="tab" href="#menu1">Microorganismos</a></li>
            <li><a data-toggle="tab" href="#menu2">Escenario 3</a></li>
            <li><a data-toggle="tab" href="#menu3">Escenario 4</a></li>
        </ul>
          
        <div class="tab-content">
            <div id="home" class="tab-pane fade in active">
              <h3>Densidad  (Kg/m3)</h3>
              <p>Densidades de las principales constituyentes de los
                alimentos y su dependencia de la temperatura.</p>
                <div class="row">
                  <label for="constituyente">Escoja constituyente:</label>
                  <select name="constituyente" id="constituyente">
                    <option value="agua">Agua</option>
                    <option value="proteina">Proteína</option>
                    <option value="grasa">Grasa</option>
                    <option value="carbohidratos">Carbohidratos</option>
                    <option value="fibra">Fibra</option>
                    <option value="ceniza">Ceniza</option>
                  </select>
                  <label for="temperatura">Temperatura:</label>
                  <input id="temperatura" type="number" step=".01">
                </div>
                <div class="row">     
                  <label for="densidad">Densidad:</label>
                  <input id="densidad" type="number" value="0.00" step=".01">
                </div>
                <div class="row">
                  <button type="button" class="btn btn-info" onclick="myDensidadFunction()">Calcular Densidad</button>
                  <button type="button" class="btn btn-light">Limpiar</button>
                </div>
                <hr>
                <h4>Densidad</h4>
                <div class="row">  
                  <label for="k_text">k:</label>
                  <input id="k_text" type="number" value="0.00" step=".01">
                  <label for="beta">β:</label>
                  <input id="beta" type="number" value="0.00" step=".01">
                  <label for="cp">Cp:</label>
                  <input id="cp" type="number" value="0.00" step=".01">
                </div>
                <div class="row">
                  <h4>Difusidad Térmica</h4>
                  <label for="aplha">α:</label>
                  <input id="alpha" type="number" step=".01">
                </div>
                <div class="row">
                  <button type="button" class="btn btn-info" onclick="myAlphaFunction()" >Calcular α</button>
                  <button type="button" class="btn btn-light" onclick="myAlphaCleaningFunction()">Limpiar</button>
                </div>
            </div>
            <div id="menu1" class="tab-pane fade">
              <h3>Microorganismos</h3>
              <div id="events">
                <div class="row">
                  <input type="text" id="micro_text" placeholder="Microorganismo">
                </div>
                <div class="row">
                    <h4>Constantes Cinéticas</h4>
                    <label for="temp_text">Temperatura (ºC):</label>
                    <input type="number" value="0.00" step=".01" id="temp_text">
                    <label for="d_text">Valor D (min):</label>
                    <input type="number" value="0.00" step=".01" id="d_text">
                    <label for="z_text">Valor Z (ºC):</label>
                    <input type="number" value="0.00" step=".01" id="z_text">
                    <label for="s_text">Valor S:</label>
                    <input type="number" value="0.00" step=".01" id="s_text">
                </div>
                <hr>
                <div class="row">
                  <h4>Proceso Deseado</h4>
                    <label for="no_text">Población Inicial (No):</label>
                    <input type="number" value="0.00" step=".01" id="no_text">
                    <label for="n_text">Población Final (N):</label>
                    <input type="number" value="0.00" step=".01" id="n_text">
                    <button type="button" class="btn btn-info" onclick="myFoFunction()">Calcular</button>
                    <button type="button" class="btn btn-light" onclick="myFoCleaningFunction()">Limpiar</button>
                  </div>
                <hr>
                <div class="row">
                  <h4>Tiempo de Muerte Térmica</h4>
                  <label for="f_text" id="f_text_label">F :</label>
                  <input type="number" value="0.00" step=".01" id="f_text">
                </div>
              </div>
              <hr>
              <table id="table_microorganismos" style="width:100%">
                <thead style="text-align:center">
                  <tr>
                    <th>Nombre Microorganismo</th>
                    <th>Temperatura (ºC)</th>
                    <th>Valor D (min)</th>
                    <th>Valor Z (ºC)</th>
                  </tr>
                </thead>
              </table>
            </div>
            <div id="menu2" class="tab-pane fade">
              <div class="container" align="center">
                <div class="row">
                    <input id="deltat" type="number" placeholder="Δt" step=".01">
                </div>
                <div class="row">
                    <button type="button" class="btn btn-info">Calcular</button>
                    <button type="button" class="btn btn-light">Limpiar</button>
                </div>
            </div>
            </div>
            <div id="menu3" class="tab-pane fade">
                <h3>Menu 3</h3>
                <p>Some content in menu 3.</p>
              </div>
        </div>
    </div>
</body>
</html>