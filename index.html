<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Discretizaci√≥n - Envase de hojalata</title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="icon" href="http://example.com/favicon.png">
  <!-- jQuery library -->
  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
  
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
  <script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
  <style> 
    sub { 
        vertical-align: sub; 
        font-size: small; 
    } 
    sup { 
        vertical-align: super; 
        font-size: small; 
    }
    input {
      border-radius: 25px;
    }
  </style> 
  <script id="code" type="text/javascript">
    function init() {
      var $ = go.GraphObject.make;  // for more concise visual tree definitions

      myDiagram =
        $(go.Diagram, "myDiagramDiv",
          {
            "grid.visible": true,
            "grid.gridCellSize": new go.Size(30, 20),
            "draggingTool.isGridSnapEnabled": true,
            "resizingTool.isGridSnapEnabled": true,
            "rotatingTool.snapAngleMultiple": 90,
            "rotatingTool.snapAngleEpsilon": 45,
            "undoManager.isEnabled": true
          });

      // when the document is modified, add a "*" to the title and enable the "Save" button
      myDiagram.addDiagramListener("Modified", function(e) {
        var button = document.getElementById("SaveButton");
        if (button) button.disabled = !myDiagram.isModified;
        var idx = document.title.indexOf("*");
        if (myDiagram.isModified) {
          if (idx < 0) document.title += "*";
        } else {
          if (idx >= 0) document.title = document.title.substr(0, idx);
        }
      });

      myDiagram.nodeTemplateMap.add("Process",
        $(go.Node, "Auto",
          {
            locationSpot: new go.Spot(0.5, 0.5), locationObjectName: "SHAPE",
            resizable: true, resizeObjectName: "SHAPE"
          },
          new go.Binding("location", "pos", go.Point.parse).makeTwoWay(go.Point.stringify),
          $(go.Shape, "Cylinder1",
            {
              name: "SHAPE",
              strokeWidth: 2,
              fill: $(go.Brush, "Linear",
                {
                  start: go.Spot.Left, end: go.Spot.Right,
                  0: "gray", 0.5: "white", 1: "gray"
                }),
              minSize: new go.Size(50, 50),
              portId: "", fromSpot: go.Spot.AllSides, toSpot: go.Spot.AllSides
            },
            new go.Binding("desiredSize", "size", go.Size.parse).makeTwoWay(go.Size.stringify)),
          $(go.TextBlock,
            {
              alignment: go.Spot.Center, textAlign: "center", margin: 5,
              editable: true
            },
            new go.Binding("text").makeTwoWay())
        ));

      myDiagram.nodeTemplateMap.add("Valve",
        $(go.Node, "Vertical",
          {
            locationSpot: new go.Spot(0.5, 1, 0, -21), locationObjectName: "SHAPE",
            selectionObjectName: "SHAPE", rotatable: true
          },
          new go.Binding("angle").makeTwoWay(),
          new go.Binding("location", "pos", go.Point.parse).makeTwoWay(go.Point.stringify),
          $(go.TextBlock,
            { alignment: go.Spot.Center, textAlign: "center", margin: 5, editable: true },
            new go.Binding("text").makeTwoWay(),
            // keep the text upright, even when the whole node has been rotated upside down
            new go.Binding("angle", "angle", function(a) { return a === 180 ? 180 : 0; }).ofObject()),
          $(go.Shape,
            {
              name: "SHAPE",
              geometryString: "F1 M0 0 L40 20 40 0 0 20z M20 10 L20 30 M12 30 L28 30",
              strokeWidth: 2,
              fill: $(go.Brush, "Linear", { 0: "gray", 0.35: "white", 0.7: "gray" }),
              portId: "", fromSpot: new go.Spot(1, 0.35), toSpot: new go.Spot(0, 0.35)
            })
        ));

      myDiagram.linkTemplate =
        $(go.Link,
          { routing: go.Link.AvoidsNodes, curve: go.Link.JumpGap, corner: 10, reshapable: true, toShortLength: 7 },
          new go.Binding("points").makeTwoWay(),
          // mark each Shape to get the link geometry with isPanelMain: true
          $(go.Shape, { isPanelMain: true, stroke: "black", strokeWidth: 5 }),
          $(go.Shape, { isPanelMain: true, stroke: "gray", strokeWidth: 3 }),
          $(go.Shape, { isPanelMain: true, stroke: "white", strokeWidth: 1, name: "PIPE", strokeDashArray: [10, 10] }),
          $(go.Shape, { toArrow: "Triangle", fill: "black", stroke: null })
        );

      load();

      loop();  // animate some flow through the pipes
    }

    function loop() {
      var diagram = myDiagram;
      setTimeout(function() {
        var oldskips = diagram.skipsUndoManager;
        diagram.skipsUndoManager = true;
        diagram.links.each(function(link) {
          var shape = link.findObject("PIPE");
          var off = shape.strokeDashOffset - 2;
          shape.strokeDashOffset = (off <= 0) ? 20 : off;
        });
        diagram.skipsUndoManager = oldskips;
        loop();
      }, 100);
    }

    function save() {
      document.getElementById("mySavedModel").value = myDiagram.model.toJson();
      myDiagram.isModified = false;
    }
    function load() {
      myDiagram.model = go.Model.fromJson(document.getElementById("mySavedModel").value);
    }
  var d_text, no_text, n_text, f_text, temperatura, constituyente, densidad, k_text, cp, beta, alpha, s_text, fx_text;
  var g, codigo_text, diametro_text, radio_text, volumen_text, area_text, letalidad_text, vs_text2, temp_text2, dw_text, f_text2;
  var x_i, densidad_i, calor_i, conductividad_i, conductividad_biot_text, calor_biot_text, biot_text, temp_text, z_text;
  var ft_text, temp_text3, f_text3, ciclos_reduccion, t_calentamiento, t_mantenimiento, t_enfriamiento, tiempo_calentamiento; 
  var EnvasesLata = [
    {
      "codigo":"202x109",
      "diametro":52,
      "radio":40
    },
    {
      "codigo":"211x102",
      "diametro":65,
      "radio":28
    },
    {
      "codigo":"202x204",
      "diametro":52,
      "radio":57
    },
    {
      "codigo":"211x109",
      "diametro":65,
      "radio":40
    },
    {
      "codigo":"300x108",
      "diametro":73,
      "radio":38
    },
    {
      "codigo":"202x210",
      "diametro":52,
      "radio":73
    },
    {
      "codigo":"211x200",
      "diametro":65,
      "radio":51
    },
    {
      "codigo":"202x306",
      "diametro":52,
      "radio":85
    },
    {
      "codigo":"202x314",
      "diametro":52,
      "radio":98
    },
    {
      "codigo":"211x212",
      "diametro":65,
      "radio":69
    },
    {
      "codigo":"300x205",
      "diametro":73,
      "radio":58
    },
    {
      "codigo":"307x113",
      "diametro":83,
      "radio":46
    },
    {
      "codigo":"300x208",
      "diametro":73,
      "radio":64
    },
    {
      "codigo":"307x113",
      "diametro":83,
      "radio":51
    },
    {
      "codigo":"211x300",
      "diametro":65,
      "radio":76
    },
    {
      "codigo":"307x206",
      "diametro":83,
      "radio":60
    },
    {
      "codigo":"211x400",
      "diametro":65,
      "radio":102
    },
    {
      "codigo":"300x304",
      "diametro":73,
      "radio":82
    },
    {
      "codigo":"300x308",
      "diametro":73,
      "radio":88
    },
    {
      "codigo":"211x414",
      "diametro":65,
      "radio":124
    },
    {
      "codigo":"401x205",
      "diametro":99,
      "radio":58
    },
    {
      "codigo":"300x402",
      "diametro":73,
      "radio":105
    },
    {
      "codigo":"300x404",
      "diametro":73,
      "radio":107
    },
    {
      "codigo":"307x306",
      "diametro":83,
      "radio":86
    },
    {
      "codigo":"401x208",
      "diametro":99,
      "radio":64
    },
    {
      "codigo":"211x510",
      "diametro":65,
      "radio":143
    },
    {
      "codigo":"300x407",
      "diametro":73,
      "radio":113
    },
    {
      "codigo":"307x309",
      "diametro":83,
      "radio":91
    },
    {
      "codigo":"401x211",
      "diametro":99,
      "radio":68
    },
    {
      "codigo":"303x406",
      "diametro":78,
      "radio":111
    },
    {
      "codigo":"307x409",
      "diametro":83,
      "radio":116
    },
    {
      "codigo":"307x509",
      "diametro":83,
      "radio":140
    },
    {
      "codigo":"401x400",
      "diametro":99,
      "radio":102
    },
    {
      "codigo":"401x512",
      "diametro":99,
      "radio":146
    },
    {
      "codigo":"401x411",
      "diametro":99,
      "radio":119
    },
    {
      "codigo":"404x502",
      "diametro":105,
      "radio":129
    },
    {
      "codigo":"404x700",
      "diametro":105,
      "radio":178
    },
    {
      "codigo":"502x512",
      "diametro":127,
      "radio":156
    },
    {
      "codigo":"603x400",
      "diametro":153,
      "radio":101
    },
    {
      "codigo":"603x600",
      "diametro":153,
      "radio":152
    },
    {
      "codigo":"603x700",
      "diametro":153,
      "radio":178
    },
    {
      "codigo":"603x908",
      "diametro":153,
      "radio":241
    }
  ];
  var Microorganismos = {
    "data":[
      {
        "name":"A. hydrophila",
        "temperatura":51,
        "valorD":8.08,
        "valorZ":5.22
      },
      {
        "name":"B. cereus",
        "temperatura":100,
        "valorD":5.0,
        "valorZ":6.9
      },
      {
        "name":"B. coagulans",
        "temperatura":110,
        "valorD":2.7,
        "valorZ":6.1
      },
      {
        "name":"B. stearothermophilus",
        "temperatura":120,
        "valorD":4.0,
        "valorZ":5.0
      },
      {
        "name":"C. jejuni",
        "temperatura":50,
        "valorD":0.88,
        "valorZ":6.0
      },
      {
        "name":"Cl. perfringens",
        "temperatura":100,
        "valorD":0.3,
        "valorZ":3.8
      },
      {
        "name":"Cl. botulinum",
        "temperatura":121,
        "valorD":0.25,
        "valorZ":10
      },
      {
        "name":"Cl. thermosaccharlyticum",
        "temperatura":120,
        "valorD":3,
        "valorZ":7.2
      },
      {
        "name":"E. coli 0157:H7",
        "temperatura":62.8,
        "valorD":0.47,
        "valorZ":4.65
      },
      {
        "name":"L. monocytogenes",
        "temperatura":62,
        "valorD":2.9,
        "valorZ":5.98
      },
      {
        "name":"S. entenerides",
        "temperatura":32.8,
        "valorD":0.06,
        "valorZ":3.3
      },
      {
        "name":"St. Aureus (destrucci√≥n de la toxina)",
        "temperatura":98.9,
        "valorD":120,
        "valorZ":27.8
      },
      {
        "name":"Streptococcus Grupo D",
        "temperatura":70,
        "valorD":2.95,
        "valorZ":10
      },
      {
        "name":"Y. enterocolitica",
        "temperatura":60.0,
        "valorD":0.4,
        "valorZ":4.0
      },
      {
        "name":"Sac. cerevisiae",
        "temperatura":60,
        "valorD":22.5,
        "valorZ":5.5
      },
      {
        "name":"Y. enterocolitica",
        "temperatura":60,
        "valorD":0.4,
        "valorZ":3.9
      }

    ] 
  }
  $(document).ready(function(){
    var tablaMicroorganismos = $('#table_microorganismos').DataTable({
          select: true,
          data: Microorganismos["data"],
          columns: [
              { data: 'name' },
              { data: 'temperatura' },
              { data: 'valorD' },
              { data: 'valorZ' }
          ]
      });
      $('#table_microorganismos tbody').on('click', 'tr', function () {
        var data = tablaMicroorganismos.row( this ).data();
        d_text = data["valorD"];
        temp_text = data["temperatura"];
        z_text = data["valorZ"];
        $('#micro_text').val(data["name"]);
        $('#temp_text').val(data["temperatura"].toFixed(3));
        $('#d_text').val(data["valorD"].toFixed(3));
        $('#z_text').val(data["valorZ"].toFixed(3));
    } );
    var tablaEnvases = $('#table_envases').DataTable({
          select: true,
          data: EnvasesLata,
          columns: [
              { data: 'codigo' },
              { data: 'diametro' },
              { data: 'radio' }
          ]
      });
      $('#table_envases tbody').on('click', 'tr', function () {
        var data = tablaEnvases.row( this ).data();
        codigo_text = data["codigo"];
        diametro_text = data["diametro"];
        radio_text = data["radio"];
        $('#codigo_text').val(codigo_text);
        $('#diametro_text').val(diametro_text.toFixed(3));
        $('#radio_text').val(radio_text.toFixed(3));
        volumen_text = volumen(diametro_text, radio_text);
        area_text = areaTotal(diametro_text, radio_text);
        letalidad_text = volumen_text/area_text;
        $('#volumen_text').val(volumen_text.toFixed(3));
        $('#area_text').val(area_text.toFixed(3));
        $('#letalidad_text').val(letalidad_text.toFixed(3));
    } );
  });
	function myFunction(){
	  var deltah = new Number($("#deltah").val());
	  var up = new Number($("#up").val());
	  var left = new Number($("#left").val());
	  var center = new Number($("#center").val());
    var right = new Number($("#right").val());
    var bottom = new Number($("#bottom").val());
    var deltar = new Number($("#deltar").val());
    var alpha = new Number($("#alpha").val());
    var deltar = new Number($("#deltar").val());
	}
	function tablaDensidad(){
    var agua = (997.18) + ((3.1439*Math.pow(10,-3))*(temperatura))-((3.7574*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    var proteina = (1329.9) - ((5.1840*Math.pow(10,-1))*(temperatura));
    var grasa = (925.59) - ((4.1757*Math.pow(10,-1))*(temperatura));
    var carbohidratos = (1599.1) - ((3.6589*Math.pow(10,-1))*(temperatura));
    var fibra = (1311.5) - ((3.6589*Math.pow(10,-1))*(temperatura));
    var ceniza = (2423.8) - ((2.8063*Math.pow(10,-1))*(temperatura));
    densidad_i  = [
      agua,
      proteina,
      grasa,
      carbohidratos,
      fibra,
      ceniza
    ];
    $("#densidad_agua").val(agua.toFixed(3));
    $("#densidad_proteina").val(proteina.toFixed(3));
    $("#densidad_grasa").val(grasa.toFixed(3));
    $("#densidad_carbohidratos").val(carbohidratos.toFixed(3));
    $("#densidad_fibra").val(fibra.toFixed(3));
    $("#densidad_ceniza").val(ceniza.toFixed(3));
  }
  function tablaCalor(){
    var agua = (4176.2) - (0.0909*temperatura)+((5.4731*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    var proteina = (2008.2) + (1.2089*temperatura) - ((1.3129*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    var grasa = (1984.2) + (1.4373*temperatura) - ((4.8008*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    var carbohidratos = (1548.8) + (1.9625*temperatura) - ((5.9399*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    var fibra = (1845.9) + (1.8306*temperatura) - ((4.6509*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    var ceniza = (1092.6) + (1.8896*temperatura) - ((3.6817*Math.pow(10,-3))*(Math.pow(temperatura,2)));
    calor_i  = [
      agua,
      proteina,
      grasa,
      carbohidratos,
      fibra,
      ceniza
    ];
    $("#calor_agua").val(agua.toFixed(3));
    $("#calor_proteina").val(proteina.toFixed(3));
    $("#calor_grasa").val(grasa.toFixed(3));
    $("#calor_carbohidratos").val(carbohidratos.toFixed(3));
    $("#calor_fibra").val(fibra.toFixed(3));
    $("#calor_ceniza").val(ceniza.toFixed(3));
  }
  function tablaConductividad(){
    var agua = (0.57109) + (1.762*Math.pow(10,-3)*temperatura) - ((6.7036*Math.pow(10,-6))*(Math.pow(temperatura,2)));
    var proteina = (0.17881) + (1.1958*Math.pow(10,-3)*temperatura) - ((2.7178*Math.pow(10,-6))*(Math.pow(temperatura,2)));
    var grasa = (0.18071) - (2.7604*Math.pow(10,-3)*temperatura) - ((1.7749*Math.pow(10,-7))*(Math.pow(temperatura,2)));
    var carbohidratos = (0.20141) + (1.3874*Math.pow(10,-3)*temperatura) - ((4.3312*Math.pow(10,-6))*(Math.pow(temperatura,2)));
    var fibra = (0.18331) + (1.2497*Math.pow(10,-3)*temperatura) - ((3.1683*Math.pow(10,-6))*(Math.pow(temperatura,2)));
    var ceniza = (0.32961) + (1.4011*Math.pow(10,-3)*temperatura) - ((2.9069*Math.pow(10,-6))*(Math.pow(temperatura,2)));
    conductividad_i  = [
      agua,
      proteina,
      grasa,
      carbohidratos,
      fibra,
      ceniza
    ];
    $("#conductividad_agua").val(agua.toFixed(3));
    $("#conductividad_proteina").val(proteina.toFixed(3));
    $("#conductividad_grasa").val(grasa.toFixed(3));
    $("#conductividad_carbohidratos").val(carbohidratos.toFixed(3));
    $("#conductividad_fibra").val(fibra.toFixed(3));
    $("#conductividad_ceniza").val(ceniza.toFixed(3));
    g = new Number($("#g_text").val());
  }
  function PrimaryFunction(){
    temperatura = new Number($("#temperatura").val());
    x_i = [
     new Number($("#agua_xi").val())/100,
     new Number($("#proteina_xi").val())/100,
     new Number($("#grasa_xi").val())/100,
     new Number($("#carbohidratos_xi").val())/100,
     new Number($("#fibra_xi").val())/100,
     new Number($("#ceniza_xi").val())/100
    ];
    tablaDensidad();
    tablaCalor();
    tablaConductividad();
    cp = sumatoria(x_i,calor_i);
    console.log(cp);
    $("#cp").val(cp.toFixed(3));
    beta = sumatoria(x_i,densidad_i);
    console.log(beta);
    $("#beta").val(beta.toFixed(3));
    myKFunction();
    myAlphaFunction();
  }
  function sumatoria(lista_1,lista_2){
    var valor = 0;
    var i;
    for(i = 0; i<lista_2.length;i++){
      valor = valor + (lista_1[i]*lista_2[i]);
    }
    return valor;
  }
  function myKFunction(){
    var k_perpendicular = 0, k_paralelo = 0;
    var epsilon_i = [
      x_i[0]/densidad_i[0],
      x_i[1]/densidad_i[1],
      x_i[2]/densidad_i[2],
      x_i[3]/densidad_i[3],
      x_i[4]/densidad_i[4],
      x_i[5]/densidad_i[5]
    ];
    k_paralelo = sumatoria(epsilon_i,conductividad_i);
    console.log(k_paralelo);
    var sum = 0;
    var i;
    for(i = 0; i<epsilon_i.length;i++){
      sum = sum + (epsilon_i[i]/conductividad_i[i]);
    }
    k_perpendicular = 1/sum;
    k_text = (g*k_perpendicular) + ((1 - g)*k_paralelo);
    $("#k_text").val(k_text.toFixed(3));
  }

  function myPrimaryCleaningFunction(){
    $("#densidad_agua").val("");
    $("#densidad_proteina").val("");
    $("#densidad_grasa").val("");
    $("#densidad_carbohidratos").val("");
    $("#densidad_fibra").val("");
    $("#densidad_ceniza").val("");
    $("#k_text").val("");
    $("#cp").val("");
    $("#beta").val("");
    $("#agua_xi").val("");
    $("#proteina_xi").val("");
    $("#grasa_xi").val("");
    $("#carbohidratos_xi").val("");
    $("#fibra_xi").val("");
    $("#ceniza_xi").val("");
    $("#g_text").val("0.00");
    $("#conductividad_agua").val("");
    $("#conductividad_proteina").val("");
    $("#conductividad_grasa").val("");
    $("#conductividad_carbohidratos").val("");
    $("#conductividad_fibra").val("");
    $("#conductividad_ceniza").val("");
    $("#calor_agua").val("");
    $("#calor_proteina").val("");
    $("#calor_grasa").val("");
    $("#calor_carbohidratos").val("");
    $("#calor_fibra").val("");
    $("#calor_ceniza").val("");
    $("#temperatura").val("");
    $("#alpha").val("");
  }
	function myCleaningFunction(){
        $("#deltah").val("");
        $("#up").val("");
        $("#left").val("");
        $("#center").val("");
        $("#right").val("");
        $("#bottom").val("");
        $("#deltar").val("");
        $("#alpha").val("");
        $("#deltat").val("");
	}
  function myFoFunction(){
    //d_text = new Number($("#d_text").val());
	  no_text = new Number($("#no_text").val());
	  n_text = new Number($("#n_text").val());
    var primerLogaritmo = Math.log10(no_text);
    console.log(primerLogaritmo);
    var segundoLogaritmo = Math.log10(n_text);
    console.log(segundoLogaritmo);
    ciclos_reduccion = (primerLogaritmo- segundoLogaritmo);
    $("#ciclos_reduccion").val(ciclos_reduccion.toFixed(3));
    f_text = d_text* ciclos_reduccion;
    $("#f_text").val(f_text.toFixed(3));
  }

  function volumen(diametro, altura){
    return area(diametro)*altura;
  }

  function area(diametro){
    return Math.PI*Math.pow(diametro/2,2);
  }

  function areaTotal(diametro, altura){
    return (2*area(diametro))+(Math.PI*(diametro)*altura)
  }
  function myFoCleaningFunction(){
        $("#no_text").val("");
        $("#n_text").val("");
        $("#f_text").val("");
        $("#ciclos_reduccion").val("");
	}
  function myF1Function(){
    temp_text2 = new Number($("#temp_text2").val());
    //d_text = new Number($("#d_text").val());
    dw_text = d_text*(Math.pow(10,-((temp_text2 - temp_text)/z_text)));
    $("#dw_text").val(dw_text.toFixed(3));
    vs_text2 = new Number($("#vs_text2").val());
    f_text2 = vs_text2*dw_text;
    $("#f_text2").val(f_text2.toFixed(3));
  }
  function myF1CleaningFunction(){
    $("#temp_text2").val("");
    $("#dw_text").val("");
    $("#vs_text2").val("");
    $("#f_text2").val("");
  }
  function myF3Function(){
    ft_text = new Number($("#ft_text").val());
    temp_text3 = new Number($("#temp_text3").val());
    f_text3 = (ft_text)*(Math.pow(10,((temp_text3 - temp_text)/z_text)));
    $("#f_text3").val(f_text3);
  }
  function myF3CleaningFunction(){
    $("#ft_text").val("");
    $("#temp_text3").val("");
    $("#f_text3").val("");
  }
  function NumeroBiot(){
    conductividad_biot_text = new Number($("#conductividad_biot_text").val());
    calor_biot_text= new Number($("#calor_biot_text").val());
    biot_text = (calor_biot_text*(letalidad_text/100))/conductividad_biot_text;
    $("#biot_text").val(biot_text);
  }
  function CleaningNumeroBiot(){
    $("#conductividad_biot_text").val("");
    $("#calor_biot_text").val("");
    $("#biot_text").val("");
  }
  function myFxFunction(){
    s_text = new Number($("#s_text").val());
    fx_text = d_text*s_text;
    $("#fx_text").val(fx_text.toFixed(3));
  }

  function myFxCleaningFunction(){
        $("#s_text").val("");
        $("#fx_text").val("");
	}

  function myAlphaFunction(){
    alpha = (k_text)/(cp*beta);
    console.log(alpha);
    const delimitador = ' x 10^';
    const punto = '.';
    var notacionCientifica = alpha.toExponential().replace(/e\+?/, delimitador);
    var tokens_List = notacionCientifica.split(delimitador);
    var coeficiente = tokens_List[0].split(punto);
    var decimales = coeficiente[1].slice(0,4);
    //$("#alpha").val(coeficiente+delimitador+tokens_List[1]);
    $("#alpha").val(coeficiente[0]+punto+decimales+delimitador+tokens_List[1]);
	}
  var cantidadElementosGrafica = 10;
  var dominio = Array.from(Array(cantidadElementosGrafica).keys()).map(String);
  var emptyData = new Array(cantidadElementosGrafica).fill(0);
  var emptyData2 = new Array(cantidadElementosGrafica).fill(1);
  var test1 = [23,4,212,231,1,2,3,42,32,3];
  var test2 = [45,39,23,273,172,2,35,3,9,3];
  window.chartColors = {
    red: 'rgb(255, 99, 132)',
    orange: 'rgb(255, 159, 64)',
    yellow: 'rgb(255, 205, 86)',
    green: 'rgb(51, 204, 51)',
    blue: 'rgb(54, 162, 235)',
    purple: 'rgb(153, 102, 255)',
    grey: 'rgb(201, 203, 207)'
};
  var lineChartData = {
			labels: dominio,
			datasets: [{
				label: 'My First dataset',
				borderColor: window.chartColors.red,
				backgroundColor: window.chartColors.red,
				fill: false,
				data: test1,
				yAxesID: 'y',
			}
      , {
				label: 'My Second dataset',
				borderColor: window.chartColors.blue,
				backgroundColor: window.chartColors.blue,
				fill: false,
				data: test2,
				yAxesID: 'y1'
			}]
		};

		window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myLine = new Chart(ctx, {
				type: 'line',
				data: lineChartData,
				options: {
					responsive: true,
					interaction: {
						mode: 'index'
					},
					stacked: false,
					plugins: {
						title: {
							display: true,
							text: 'Texto de gr√°fica'
						}
					},
					scales: {
						y: {
							type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
							display: true,
							position: 'left',
						},
						y1: {
							type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
							display: true,
							position: 'right',

							// grid line settings
							gridLines: {
								drawOnChartArea: false, // only want the grid lines for one axis to show up
							},
						},
					}
				}
			});
		};

		$('actualizar').click(function() {
			lineChartData.datasets.forEach(function(dataset) {
				dataset.data = dataset.data.map((currElement, index) => {
          console.log("The current iteration is: " + index);
          console.log("The current element is: " + currElement);
          console.log("\n");
          return valorGrafica(index); //equivalent to list[index]
        });
			});

			window.myLine.update();
		});
  function valorGrafica(indice){
    if (t_calentamiento&&t_enfriamiento&&t_mantenimiento){
      var funcionLineal = indice + t_calentamiento;
      if(funcionLineal<t_enfriamiento){
        return funcionLineal;
      }
      else {
        return t_enfriamiento
      }
    }
  }

  </script>

</head>
<body>
    <div class="container" align="center">
        <h1>Discretizaci√≥n - Envase de hojalata</h1>
    </div>
    <hr>
    <div class="container" align="center">
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#home">Propiedades T√©rmicas</a></li>
            <li><a data-toggle="tab" href="#menu1">Microorganismos</a></li>
            <li><a data-toggle="tab" href="#envases">Latas cil√≠ndricas</a></li>
            <li><a data-toggle="tab" href="#menu2">Enclave</a></li>
            <li><a data-toggle="tab" href="#menu3">Gr√°fica</a></li>
        </ul>
          
        <div class="tab-content">
            <div id="home" class="tab-pane fade in active">
              <p>Propiedades t√®rmicas de los principales constituyentes de un alimento.</p>
                  <div class="row">
                      <label for="temperatura">Temperatura:</label>
                        <input id="temperatura" type="number" step=".01" value="0.00">
                        <span>[¬∞C]</span>
                      <label for="g_text">Grado de libertad:</label>
                      <input id="g_text" type="number" step=".01" value="0.00" min="0" max="1">
                  </div>
                <div class="row">     
                  <label for="agua_xi">% H20:</label>
                  <input id="agua_xi" type="number" value="0.00" step=".01">
                  <label for="proteina_xi">% Prote√≠na:</label>
                  <input id="proteina_xi" type="number" value="0.00" step=".01">
                  <label for="grasa_xi">% Grasa:</label>
                  <input id="grasa_xi" type="number" value="0.00" step=".01">
                </div>
                <div class="row">     
                  <label for="carbohidratos_xi">% CHo:</label>
                  <input id="carbohidratos_xi" type="number" value="0.00" step=".01">
                  <label for="fibra_xi">% Fibra:</label>
                  <input id="fibra_xi" type="number" value="0.00" step=".01">
                  <label for="ceniza_xi">% Ceniza:</label>
                  <input id="ceniza_xi" type="number" value="0.00" step=".01">
                </div>
                <div class="row">
                  <button type="button" class="btn btn-info" onclick="PrimaryFunction()">Calcular</button>
                  <button type="button" class="btn btn-light" onclick="myPrimaryCleaningFunction()">Limpiar</button>
                </div>
                <hr>
                <h4>Densidades [Kg/m¬≥]</h4>
                <div class="row">     
                  <label for="densidad_agua">Agua:</label>
                  <input id="densidad_agua" type="number" value="0.00" step=".01">
                  <label for="densidad_proteina">Prote√≠na:</label>
                  <input id="densidad_proteina" type="number" value="0.00" step=".01">
                  <label for="densidad_grasa">Grasa:</label>
                  <input id="densidad_grasa" type="number" value="0.00" step=".01">
                </div>
                <div class="row">     
                  <label for="densidad_carbohidratos">Carbohidratos:</label>
                  <input id="densidad_carbohidratos" type="number" value="0.00" step=".01">
                  <label for="densidad_fibra">Fibra:</label>
                  <input id="densidad_fibra" type="number" value="0.00" step=".01">
                  <label for="densidad_ceniza">Ceniza:</label>
                  <input id="densidad_ceniza" type="number" value="0.00" step=".01">
                </div>
                <hr>
                <h4>Calores espec√≠ficos [J/Kg¬∞C]</h4>
                <div class="row">     
                  <label for="calor_agua">Agua:</label>
                  <input id="calor_agua" type="number" value="0.00" step=".01">
                  <label for="calor_proteina">Prote√≠na:</label>
                  <input id="calor_proteina" type="number" value="0.00" step=".01">
                  <label for="calor_grasa">Grasa:</label>
                  <input id="calor_grasa" type="number" value="0.00" step=".01">
                </div>
                <div class="row">     
                  <label for="calor_carbohidratos">Carbohidratos:</label>
                  <input id="calor_carbohidratos" type="number" value="0.00" step=".01">
                  <label for="calor_fibra">Fibra:</label>
                  <input id="calor_fibra" type="number" value="0.00" step=".01">
                  <label for="calor_ceniza">Ceniza:</label>
                  <input id="calor_ceniza" type="number" value="0.00" step=".01">
                </div>
                <hr>
                <h4>Conductividades t√©rmicas [W/m¬∞C]</h4>
                <div class="row">     
                  <label for="conductividad_agua">Agua:</label>
                  <input id="conductividad_agua" type="number" value="0.00" step=".01">
                  <label for="conductividad_proteina">Prote√≠na:</label>
                  <input id="conductividad_proteina" type="number" value="0.00" step=".01">
                  <label for="conductividad_grasa">Grasa:</label>
                  <input id="conductividad_grasa" type="number" value="0.00" step=".01">
                </div>
                <div class="row">     
                  <label for="conductividad_carbohidratos">Carbohidratos:</label>
                  <input id="conductividad_carbohidratos" type="number" value="0.00" step=".01">
                  <label for="conductividad_fibra">Fibra:</label>
                  <input id="conductividad_fibra" type="number" value="0.00" step=".01">
                  <label for="conductividad_ceniza">Ceniza:</label>
                  <input id="conductividad_ceniza" type="number" value="0.00" step=".01">
                </div>
                <hr>
                <div class="row">  
                  <label for="k_text">k:</label>
                  <input id="k_text" type="number" value="0.00" step=".01">
                  <span>[W/m¬∞C]</span>
                  <label for="beta">œÅ:</label>
                  <input id="beta" type="number" value="0.00" step=".01">
                  <span>[Kg/m¬≥]</span>
                  <label for="cp">Cp:</label>
                  <input id="cp" type="number" value="0.00" step=".01">
                  <span>[J/Kg¬∞C]</span>
                </div>
                <div class="row">
                  <h4>Difusidad T√©rmica</h4>
                  <label for="aplha">Œ±:</label>
                  <input id="alpha" type="text">
                  <span>[„é°/s]</span>
                </div>
            </div>
            <div id="menu1" class="tab-pane fade">
              <h3>Microorganismos</h3>
              <div id="events">
                <div class="row">
                  <input type="text" id="micro_text" placeholder="Microorganismo">
                </div>
                <div class="row">
                    <h4>Constantes Cin√©ticas</h4>
                    <label for="temp_text">Temperatura (¬∫C):</label>
                    <input type="number" value="0.00" step=".01" id="temp_text">
                    <label for="d_text">Valor D (min):</label>
                    <input type="number" value="0.00" step=".01" id="d_text">
                    <label for="z_text">Valor Z (¬∫C):</label>
                    <input type="number" value="0.00" step=".01" id="z_text">
                </div>
                <hr>
                <div class="row">
                  <h4>Proceso Deseado</h4>
                    <label for="no_text">Poblaci√≥n Inicial (No):</label>
                    <input type="number" value="0.00" step=".01" id="no_text">
                    <label for="n_text">Poblaci√≥n Final (N):</label>
                    <input type="number" value="0.00" step=".01" id="n_text">
                </div>
                <div class="row">
                  <label for="f_text" id="ciclos_reduccion_label">Ciclos de reducci√≥n :</label>
                  <input type="number" value="0.00" step=".01" id="ciclos_reduccion">
                  <label for="f_text" id="f_text_label">Fo Deseado :</label>
                  <input type="number" value="0.00" step=".01" id="f_text">
                  <button type="button" class="btn btn-info" onclick="myFoFunction()">Calcular</button>
                  <button type="button" class="btn btn-light" onclick="myFoCleaningFunction()">Limpiar</button>
                </div>
                <hr>
                <div class="row">
                  <h4>Tiempo de Muerte T√©rmica</h4>
                </div>
                <div class="row">
                  <label for="s_text">Valor S:</label>
                  <input type="number" value="0.00" step=".01" id="s_text">
                </div>
                <div class="row">
                  <label for="fx_text" id="f_text_label">Fo Te√≥rico - 1 :</label>
                  <input type="number" value="0.00" step=".01" id="fx_text">
                  <button type="button" class="btn btn-info" onclick="myFxFunction()">Calcular</button>
                  <button type="button" class="btn btn-light" onclick="myFxCleaningFunction()">Limpiar</button>
                </div>
                <hr>
                <div class="row">
                  <label for="temp_text2" >Temperatura :</label>
                  <input type="number" value="0.00" step=".01" id="temp_text2">
                  <span>[¬∞C]</span>
                  <label for="vs_text2" >Vs :</label>
                  <input type="number" value="0.00" step=".01" id="vs_text2">
                </div>
                <div class="row">
                  <label for="dw_text" >Dw :</label>
                  <input type="number" value="0.00" step=".01" id="dw_text">
                  <span>[min]</span>
                  <label for="f_text2" >Fo Te√≥rico - 2 :</label>
                  <input type="number" value="0.00" step=".01" id="f_text2">
                  <button type="button" class="btn btn-info" onclick="myF1Function()">Calcular</button>
                  <button type="button" class="btn btn-light" onclick="myF1CleaningFunction()">Limpiar</button>
                </div>
                <hr>
                <div class="row">
                  <label for="ft_text" >Ft :</label>
                  <input type="number" value="0.00" step=".01" id="ft_text">
                  <label for="temp_text3" >Temperatura :</label>
                  <input type="number" value="0.00" step=".01" id="temp_text3">
                  <span>[¬∞C]</span>
                </div>
                <div class="row">
                  <label for="f_text3" >Fo Te√≥rico - 3 :</label>
                  <input type="number" value="0.00" step=".01" id="f_text3">
                  <button type="button" class="btn btn-info" onclick="myF3Function()">Calcular</button>
                  <button type="button" class="btn btn-light" onclick="myF3CleaningFunction()">Limpiar</button>
                </div>
              </div>
              <hr>
              <table id="table_microorganismos" style="width:100%">
                <thead style="text-align:center">
                  <tr>
                    <th>Nombre Microorganismo</th>
                    <th>Temperatura (¬∫C)</th>
                    <th>Valor D (min)</th>
                    <th>Valor Z (¬∫C)</th>
                  </tr>
                </thead>
              </table>
            </div>
            <div id="menu2" class="tab-pane fade">
              <div class="container" align="center">
                <div class="row">
                  <label for="t_calentamiento" >Temperatura de calentamiento :</label>
                  <input type="number" value="0.00" step=".01" id="t_calentamiento">
                  <span>[¬∞C]</span>
                  <label for="tiempo_calentamiento" >Tiempo de calentamiento :</label>
                  <input type="number" value="0.00" step=".01" id="tiempo_calentamiento">
                </div>
                <div class="row">
                  <label for="t_mantenimiento" >Temperatura de mantenimiento :</label>
                  <input type="number" value="0.00" step=".01" id="t_mantenimiento">
                  <span>[¬∞C]</span>
                </div>
                <div class="row">
                  <label for="t_enfriamiento" >Temperatura de enfriamiento :</label>
                  <input type="number" value="0.00" step=".01" id="t_enfriamiento">
                  <span>[¬∞C]</span>
                </div>
                <div class="row">
                    <button type="button" class="btn btn-info">Calcular</button>
                    <button type="button" class="btn btn-light">Limpiar</button>
                </div>
            </div>
            </div>
            <div id="envases" class="tab-pane fade">
              <div class="container" align="center">
                <h4>Dimensiones de latas cil√≠ndricas</h4>
                <div class="row">
                  <label for="codigo_text">C√≥digo USA:</label>
                  <input type="text" id="codigo_text">
                  <label for="diametro_text">Di√°metro (mm):</label>
                  <input type="number" value="0.00" step=".01" id="diametro_text">
                  <label for="radio_text">Altura (mm):</label>
                  <input type="number" value="0.00" step=".01" id="radio_text">
                </div>
                <hr>
                <div class="row">
                  <label for="volumen_text">Volumen:</label>
                  <input type="number" value="0.00" step=".01" id="volumen_text">
                  <span>[mm¬≥]</span>
                  <label for="area_text">√Årea:</label>
                  <input type="number" value="0.00" step=".01" id="area_text">
                  <span>[m„é°]</span>
                </div>
                <div class="row">
                  <label for="letalidad_text">Longitud caracter√≠stica:</label>
                  <input type="number" value="0.00" step=".01" id="letalidad_text">
                  <span>[mm]</span>
                </div>
                <hr>
                <h4>N√∫mero de Biot</h4>
                <div class="row">
                  <label for="conductividad_biot_text">Conductividad T√©rmica:</label>
                  <input type="number" value="0.00" step=".01" id="conductividad_biot_text">
                  <span>[W/m¬∞C]</span>
                  <label for="calor_biot_text">Coeficiente de Transferencia de calor del medio:</label>
                  <input type="number" value="0.00" step=".01" id="calor_biot_text">
                  <span>[W/¬∞C]</span>
                  <button type="button" class="btn btn-info" onclick="NumeroBiot()">Calcular</button>
                  <button type="button" class="btn btn-light" onclick="CleaningNumeroBiot()">Limpiar</button>
                </div>
                <div class="row">
                  <label for="biot_text">Bi:</label>
                  <input type="number" value="0.00" step=".01" id="biot_text">
                </div>
                <hr>
                <table id="table_envases" style="width:100%">
                  <thead style="text-align:center">
                    <tr>
                      <th>C√≥digo USA</th>
                      <th>Di√°metro (mm)</th>
                      <th>Altura (mm)</th>
                    </tr>
                  </thead>
                </table>
              </div>
            </div>
            <div id="menu3" class="tab-pane fade">
              <div class="container" align="center">
                <div class="row">
                    <input type="number"  disabled>
                    <input type="number" disabled>
                    <input type="number" disabled>
                    <input type="number" disabled>
                    <input id="deltah" type="number" placeholder="Œîh" step=".01">
                </div>
                <div class="row">
                    <input type="number" disabled>
                    <input type="number" disabled>
                    <input type="number" id="up" step=".01" placeholder="i,j-1">
                    <input type="number" disabled>
                    <input type="number" disabled>
                </div>
                <div class="row">
                    <input type="number" disabled>
                    <input type="number" id="left" step=".01" placeholder="i-1,j">
                    <input type="number" id="center" step=".01" placeholder="i,j">
                    <input type="number" id="right" step=".01" placeholder="i+1,j">
                    <input type="number" disabled>
                </div>
                <div class="row">
                    <input type="number" disabled>
                    <input type="number" disabled>
                    <input type="number" id="bottom" step=".01" placeholder="i,j+1">
                    <input type="number" disabled>
                    <input type="number" disabled>
                </div>
                <div class="row">
                    <input id="deltar" type="number" placeholder="Œîr" step=".01">
                    <input type="number" disabled>
                    <input type="number" disabled>
                    <input type="number" disabled>
                    <input type="number" disabled>
                </div>
                <hr>
                <div style="width:75%;">
                  <canvas id="canvas"></canvas>
                </div>
                <button id="actualizar">Actualizar</button>
            </div>
          </div>
        </div>
    </div>
    <hr>
    <footer>
      <div class="container" align="center">
        <p>Autor: Ing. Leonardo Andr√© Castro Alb√°n</p>
        <p><a href="mailto:leancast@espol.edu.ec">leancast@espol.edu.ec</a></p>
      </div>
    </footer>
</body>
</html>